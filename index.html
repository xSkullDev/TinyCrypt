<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steganografi Gambar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Steganografi Gambar</h1>
        <div class="controls">
            <input type="file" id="imageInput" accept="image/*">
            <label for="keyInput">Masukkan Kunci (16 karakter)</label>
            <input type="text" id="keyInput" maxlength="16" placeholder="16 karakter (mis. 1234567890123456)">
            <label for="messageInput">Masukkan Pesan</label>
            <textarea id="messageInput" rows="4"></textarea>
            <div class="btn-row">
                <button id="encryptButton">Enkripsi & Sisipkan</button>
                <button id="decryptButton">Dekripsi</button>
            </div>
        </div>
        <div id="output">
            <h2>Hasil</h2>
            <div class="images">
                <!-- Row 1: Original and Stego (always visible) -->
                <div class="image-row" id="encodeRow">
                    <div class="img-col">
                        <h4>Gambar Asli</h4>
                        <canvas id="originalCanvas"></canvas>
                        <div class="img-meta" id="metaOriginal"></div>
                    </div>
                    <div class="img-col">
                        <h4>Gambar Stego</h4>
                        <canvas id="encryptedCanvas"></canvas>
                        <div class="img-meta" id="metaEncrypted"></div>
                        <div class="download-row">
                            <button id="downloadStego" disabled>Download Stego</button>
                            <button id="downloadHistogram" disabled>Download Histogram</button>
                            <button id="downloadReport" disabled>Download Report</button>
                        </div>
                    </div>
                </div>

                <!-- Row 2: shown when user clicks Dekripsi: Input image + Decrypted result -->
                <div class="image-row" id="decryptRow" style="display:none; margin-top:18px;">
                    <div class="img-col">
                        <h4>Gambar Input (Untuk Dekripsi)</h4>
                        <canvas id="decryptInputCanvas"></canvas>
                        <div class="img-meta" id="metaDecryptInput"></div>
                    </div>
                    <div class="img-col">
                        <h4>Gambar Hasil Dekripsi</h4>
                        <canvas id="decryptedCanvas"></canvas>
                        <div class="img-meta" id="metaDecrypted"></div>
                    </div>
                </div>
            </div>
            <div id="diagram">
                <h3>Histogram Citra: Asli & Stego</h3>
                <div class="hist-row">
                    <div class="hist-col">
                        <h4>Histogram Asli</h4>
                        <canvas id="histOriginal"></canvas>
                    </div>
                    <div class="hist-col">
                        <h4>Histogram Stego</h4>
                        <canvas id="histStego"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <!-- hidden canvas used to export stego image at full resolution -->
        <canvas id="hiddenStegoCanvas" style="display:none;"></canvas>
    </div>
    <script src="script.js"></script>
</body>
</html>
